---
title: "https三次握手"
date: 20119-03-03
categories: 网络
description: https
tags: 
- 网络
- 前端
---

#### 第一步：围绕数字证书

由客户端发起第一次握手，目的是从服务端获取数字签名证书，服务端在发送签名证书之前，会确认客户端的ssl版本、加密算法等信息；

> 客户端有‘证书管理器’，里面拥有“受信任的证书发放机构列表”。客户端会自己查找数字证书的公钥是否在这个列表中。如果数字证书记载的网站和正在浏览的网站网址不同，就说明证书可能被冒用，浏览器会向用户发送警报。  

<!--more-->

#### 第二步：进行数字签名认证

第二次握手是客户端收到证书后发起的，主要目的是将AES加解密使用的key发送给服务端，当然这个key是使用第一次握手获得的公钥加密的。服务端收到后，使用服务端的私钥进行解密。这样客户端和服务端二次握手之后就都持有了AES加解密的key；

> 通俗的讲，这个步骤就是验证服务端是服务端，客户端是客户端，而不是中间者。
>
> 浏览器从第一次握手得到的数字证书中可以获取签名函数，将发送的报文生成一个非常小的摘要信息。服务端收到后，利用公开密钥和私有密钥解密得到报文。并且自身再使用同样的签名函数签名得到报文摘要。两个摘要相等，就说明验证成功。

#### 第三步：

当服务端和客户端都持有key之后，就可以使用怼城加密了。就算此时被劫持，第三方由于不知道key也无法破译。这里不再使用RSA加密是为了提高HTTPS的性能